/*!
 * ghostium
 * A Ghost theme focused on content based on Medium design/ux
 * http://ghostium.oswaldoacauan.com/
 * @author Oswaldo Acauan http://oswaldoacauan.com
 * @version 2.3.2
 * Copyright 2013. MIT licensed.
 */

window.Modernizr=function(e,t,n){var r,o,i={},a=t.documentElement,s="modernizr",c=t.createElement(s),u=c.style,l=t.createElement("input"),p=":)",d={}.toString,f=" -webkit- -moz- -o- -ms- ".split(" "),h="Webkit Moz O ms",g=h.split(" "),m=h.toLowerCase().split(" "),v="http://www.w3.org/2000/svg",y={},b={},w={},P=[],S=P.slice,x=function(e,n,r,o){var i,c,u,l,p=t.createElement("div"),d=t.body,f=d||t.createElement("body");if(parseInt(r,10))for(;r--;)(u=t.createElement("div")).id=o?o[r]:s+(r+1),p.appendChild(u);return i=["&#173;",'<style id="s',s,'">',e,"</style>"].join(""),p.id=s,(d?p:f).innerHTML+=i,f.appendChild(p),d||(f.style.background="",f.style.overflow="hidden",l=a.style.overflow,a.style.overflow="hidden",a.appendChild(f)),c=n(p,e),d?p.parentNode.removeChild(p):(f.parentNode.removeChild(f),a.style.overflow=l),!!c},k=function(){var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(r,o){o=o||t.createElement(e[r]||"div");var i=(r="on"+r)in o;return i||(o.setAttribute||(o=t.createElement("div")),o.setAttribute&&o.removeAttribute&&(o.setAttribute(r,""),i=T(o[r],"function"),T(o[r],"undefined")||(o[r]=n),o.removeAttribute(r))),o=null,i}}(),E={}.hasOwnProperty;function C(e){u.cssText=e}function T(e,t){return typeof e===t}function L(e,t){return!!~(""+e).indexOf(t)}function M(e,t){for(var r in e){var o=e[r];if(!L(o,"-")&&u[o]!==n)return"pfx"!=t||o}return!1}function N(e,t,r){var o=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+g.join(o+" ")+o).split(" ");return T(t,"string")||T(t,"undefined")?M(i,t):function(e,t,r){for(var o in e){var i=t[e[o]];if(i!==n)return!1===r?e[o]:T(i,"function")?i.bind(r||t):i}return!1}(i=(e+" "+m.join(o+" ")+o).split(" "),t,r)}for(var q in o=T(E,"undefined")||T(E.call,"undefined")?function(e,t){return t in e&&T(e.constructor.prototype[t],"undefined")}:function(e,t){return E.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=S.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};o.prototype=t.prototype;var i=new o,a=t.apply(i,n.concat(S.call(arguments)));return Object(a)===a?a:i}return t.apply(e,n.concat(S.call(arguments)))};return r}),y.flexbox=function(){return N("flexWrap")},y.flexboxlegacy=function(){return N("boxDirection")},y.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},y.canvastext=function(){return!(!i.canvas||!T(t.createElement("canvas").getContext("2d").fillText,"function"))},y.webgl=function(){return!!e.WebGLRenderingContext},y.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:x(["@media (",f.join("touch-enabled),("),s,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},y.geolocation=function(){return"geolocation"in navigator},y.postmessage=function(){return!!e.postMessage},y.websqldatabase=function(){return!!e.openDatabase},y.indexedDB=function(){return!!N("indexedDB",e)},y.hashchange=function(){return k("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},y.history=function(){return!(!e.history||!history.pushState)},y.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},y.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},y.rgba=function(){return C("background-color:rgba(150,255,150,.5)"),L(u.backgroundColor,"rgba")},y.hsla=function(){return C("background-color:hsla(120,40%,100%,.5)"),L(u.backgroundColor,"rgba")||L(u.backgroundColor,"hsla")},y.multiplebgs=function(){return C("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(u.background)},y.backgroundsize=function(){return N("backgroundSize")},y.borderimage=function(){return N("borderImage")},y.borderradius=function(){return N("borderRadius")},y.boxshadow=function(){return N("boxShadow")},y.textshadow=function(){return""===t.createElement("div").style.textShadow},y.opacity=function(){var e,t;return e="opacity:.55",C(f.join(e+";")+(t||"")),/^0.55$/.test(u.opacity)},y.cssanimations=function(){return N("animationName")},y.csscolumns=function(){return N("columnCount")},y.cssgradients=function(){var e="background-image:";return C((e+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));"+e)+f.join("linear-gradient(left top,#9f9, white);"+e)).slice(0,-e.length)),L(u.backgroundImage,"gradient")},y.cssreflections=function(){return N("boxReflect")},y.csstransforms=function(){return!!N("transform")},y.csstransforms3d=function(){var e=!!N("perspective");return e&&"webkitPerspective"in a.style&&x("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=9===t.offsetLeft&&3===t.offsetHeight}),e},y.csstransitions=function(){return N("transition")},y.fontface=function(){var e;return x('@font-face {font-family:"font";src:url("https://")}',function(n,r){var o=t.getElementById("smodernizr"),i=o.sheet||o.styleSheet,a=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"";e=/src/i.test(a)&&0===a.indexOf(r.split(" ")[0])}),e},y.generatedcontent=function(){var e;return x(["#",s,"{font:0/0 a}#",s,':after{content:"',p,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},y.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&((n=new Boolean(n)).ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return n},y.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&((n=new Boolean(n)).ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return n},y.localstorage=function(){try{return localStorage.setItem(s,s),localStorage.removeItem(s),!0}catch(e){return!1}},y.sessionstorage=function(){try{return sessionStorage.setItem(s,s),sessionStorage.removeItem(s),!0}catch(e){return!1}},y.webworkers=function(){return!!e.Worker},y.applicationcache=function(){return!!e.applicationCache},y.svg=function(){return!!t.createElementNS&&!!t.createElementNS(v,"svg").createSVGRect},y.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==v},y.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(d.call(t.createElementNS(v,"animate")))},y.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(d.call(t.createElementNS(v,"clipPath")))},y)o(y,q)&&(r=q.toLowerCase(),i[r]=y[q](),P.push((i[r]?"":"no-")+r));return i.input||(i.input=function(n){for(var r=0,o=n.length;r<o;r++)w[n[r]]=!!(n[r]in l);return w.list&&(w.list=!(!t.createElement("datalist")||!e.HTMLDataListElement)),w}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),i.inputtypes=function(e){for(var r,o,i,s=0,c=e.length;s<c;s++)l.setAttribute("type",o=e[s]),(r="text"!==l.type)&&(l.value=p,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(o)&&l.style.WebkitAppearance!==n?(a.appendChild(l),r=(i=t.defaultView).getComputedStyle&&"textfield"!==i.getComputedStyle(l,null).WebkitAppearance&&0!==l.offsetHeight,a.removeChild(l)):/^(search|tel)$/.test(o)||(r=/^(url|email)$/.test(o)?l.checkValidity&&!1===l.checkValidity():l.value!=p)),b[e[s]]=!!r;return b}("search tel url email datetime date month week time datetime-local number range color".split(" "))),i.addTest=function(e,t){if("object"==typeof e)for(var r in e)o(e,r)&&i.addTest(r,e[r]);else{if(e=e.toLowerCase(),i[e]!==n)return i;t="function"==typeof t?t():t,a.className+=" "+(t?"":"no-")+e,i[e]=t}return i},C(""),c=l=null,function(e,t){var n,r,o=e.html5||{},i=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,a=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,s="_html5shiv",c=0,u={};function l(){var e=h.elements;return"string"==typeof e?e.split(" "):e}function p(e){var t=u[e[s]];return t||(t={},c++,e[s]=c,u[c]=t),t}function d(e,n,o){return n||(n=t),r?n.createElement(e):(o||(o=p(n)),(s=o.cache[e]?o.cache[e].cloneNode():a.test(e)?(o.cache[e]=o.createElem(e)).cloneNode():o.createElem(e)).canHaveChildren&&!i.test(e)?o.frag.appendChild(s):s);var s}function f(e){e||(e=t);var o,i,a,s,c,u,f=p(e);return!h.shivCSS||n||f.hasCSS||(f.hasCSS=(i="article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}",a=(o=e).createElement("p"),s=o.getElementsByTagName("head")[0]||o.documentElement,a.innerHTML="x<style>"+i+"</style>",!!s.insertBefore(a.lastChild,s.firstChild))),r||(c=e,(u=f).cache||(u.cache={},u.createElem=c.createElement,u.createFrag=c.createDocumentFragment,u.frag=u.createFrag()),c.createElement=function(e){return h.shivMethods?d(e,c,u):u.createElem(e)},c.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(e){return u.createElem(e),u.frag.createElement(e),'c("'+e+'")'})+");return n}")(h,u.frag)),e}!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",n="hidden"in e,r=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return void 0===e.cloneNode||void 0===e.createDocumentFragment||void 0===e.createElement}()}catch(e){n=!0,r=!0}}();var h={elements:o.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:!1!==o.shivCSS,supportsUnknownElements:r,shivMethods:!1!==o.shivMethods,type:"default",shivDocument:f,createElement:d,createDocumentFragment:function(e,n){if(e||(e=t),r)return e.createDocumentFragment();for(var o=(n=n||p(e)).frag.cloneNode(),i=0,a=l(),s=a.length;i<s;i++)o.createElement(a[i]);return o}};e.html5=h,f(t)}(this,t),i._version="2.6.3",i._prefixes=f,i._domPrefixes=m,i._cssomPrefixes=g,i.mq=function(t){var n,r=e.matchMedia||e.msMatchMedia;return r?r(t).matches:(x("@media "+t+" { #"+s+" { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),n)},i.hasEvent=k,i.testProp=function(e){return M([e])},i.testAllProps=N,i.testStyles=x,i.prefixed=function(e,t,n){return t?N(e,t,n):N(e,"pfx")},a.className=a.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+P.join(" "),i}(this,this.document),function(){var e,t,n,r,o,i,a,s,c,u,l,p,d,f,h,g,m,v,y,b,w,P,S,x,k,E,C,T,L,M,N,q,j,R,A,F,D,O,_,$,z,W,H,I,U,B,G,V=[].slice,X={}.hasOwnProperty,J=function(e,t){for(var n in t)X.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},K=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};for(b={catchupTime:500,initialRate:.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},T=function(){var e;return null!=(e="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?e:+new Date},M=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,y=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==M&&(M=function(e){return setTimeout(e,50)},y=function(e){return clearTimeout(e)}),q=function(e){var t,n;return t=T(),(n=function(){var r;return(r=T()-t)>=33?(t=T(),e(r,function(){return M(n)})):setTimeout(n,33-r)})()},N=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?V.call(arguments,2):[],"function"==typeof n[t]?n[t].apply(n,e):n[t]},w=function(){var e,t,n,r,o,i,a;for(t=arguments[0],i=0,a=(r=2<=arguments.length?V.call(arguments,1):[]).length;i<a;i++)if(n=r[i])for(e in n)X.call(n,e)&&(o=n[e],null!=t[e]&&"object"==typeof t[e]&&null!=o&&"object"==typeof o?w(t[e],o):t[e]=o);return t},g=function(e){var t,n,r,o,i;for(n=t=0,o=0,i=e.length;o<i;o++)r=e[o],n+=Math.abs(r),t++;return n/t},S=function(e,t){var n,r,o;if(null==e&&(e="options"),null==t&&(t=!0),o=document.querySelector("[data-pace-"+e+"]")){if(n=o.getAttribute("data-pace-"+e),!t)return n;try{return JSON.parse(n)}catch(e){return r=e,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",r):void 0}}},a=function(){function e(){}return e.prototype.on=function(e,t,n,r){var o;return null==r&&(r=!1),null==this.bindings&&(this.bindings={}),null==(o=this.bindings)[e]&&(o[e]=[]),this.bindings[e].push({handler:t,ctx:n,once:r})},e.prototype.once=function(e,t,n){return this.on(e,t,n,!0)},e.prototype.off=function(e,t){var n,r,o;if(null!=(null!=(r=this.bindings)?r[e]:void 0)){if(null==t)return delete this.bindings[e];for(n=0,o=[];n<this.bindings[e].length;)this.bindings[e][n].handler===t?o.push(this.bindings[e].splice(n,1)):o.push(n++);return o}},e.prototype.trigger=function(){var e,t,n,r,o,i,a,s,c;if(n=arguments[0],e=2<=arguments.length?V.call(arguments,1):[],null!=(a=this.bindings)?a[n]:void 0){for(o=0,c=[];o<this.bindings[n].length;)r=(s=this.bindings[n][o]).handler,t=s.ctx,i=s.once,r.apply(null!=t?t:this,e),i?c.push(this.bindings[n].splice(o,1)):c.push(o++);return c}},e}(),null==window.Pace&&(window.Pace={}),w(Pace,a.prototype),L=Pace.options=w({},b,window.paceOptions,S()),W=0,I=(B=["ajax","document","eventLag","elements"]).length;W<I;W++)!0===L[F=B[W]]&&(L[F]=b[F]);c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return J(t,e),t}(Error),t=function(){function e(){this.progress=0}return e.prototype.getElement=function(){var e;if(null==this.el){if(!(e=document.querySelector(L.target)))throw new c;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=e.firstChild?e.insertBefore(this.el,e.firstChild):e.appendChild(this.el)}return this.el},e.prototype.finish=function(){var e;return(e=this.getElement()).className=e.className.replace("pace-active",""),e.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},e.prototype.update=function(e){return this.progress=e,this.render()},e.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(e){c=e}return this.el=void 0},e.prototype.render=function(){var e,t;return null!=document.querySelector(L.target)&&((e=this.getElement()).children[0].style.width=this.progress+"%",(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(e.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?t="99":(t=this.progress<10?"0":"",t+=0|this.progress),e.children[0].setAttribute("data-progress",""+t)),this.lastRenderedProgress=this.progress)},e.prototype.done=function(){return this.progress>=100},e}(),s=function(){function e(){this.bindings={}}return e.prototype.trigger=function(e,t){var n,r,o,i,a;if(null!=this.bindings[e]){for(a=[],r=0,o=(i=this.bindings[e]).length;r<o;r++)n=i[r],a.push(n.call(this,t));return a}},e.prototype.on=function(e,t){var n;return null==(n=this.bindings)[e]&&(n[e]=[]),this.bindings[e].push(t)},e}(),z=window.XMLHttpRequest,$=window.XDomainRequest,_=window.WebSocket,P=function(e,t){var n,r,o;for(n in o=[],t.prototype)try{r=t.prototype[n],null==e[n]&&"function"!=typeof r?o.push(e[n]=r):o.push(void 0)}catch(e){e}return o},E=[],Pace.ignore=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?V.call(arguments,1):[],E.unshift("ignore"),n=t.apply(null,e),E.shift(),n},Pace.track=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?V.call(arguments,1):[],E.unshift("track"),n=t.apply(null,e),E.shift(),n},A=function(e){var t;if(null==e&&(e="GET"),"track"===E[0])return"force";if(!E.length&&L.ajax){if("socket"===e&&L.ajax.trackWebSockets)return!0;if(t=e.toUpperCase(),K.call(L.ajax.trackMethods,t)>=0)return!0}return!1},u=function(e){function t(){var e,n=this;t.__super__.constructor.apply(this,arguments),e=function(e){var t;return t=e.open,e.open=function(r,o,i){return A(r)&&n.trigger("request",{type:r,url:o,request:e}),t.apply(e,arguments)}},window.XMLHttpRequest=function(t){var n;return n=new z(t),e(n),n};try{P(window.XMLHttpRequest,z)}catch(e){}if(null!=$){window.XDomainRequest=function(){var t;return t=new $,e(t),t};try{P(window.XDomainRequest,$)}catch(e){}}if(null!=_&&L.ajax.trackWebSockets){window.WebSocket=function(e,t){var r;return r=null!=t?new _(e,t):new _(e),A("socket")&&n.trigger("request",{type:"socket",url:e,protocols:t,request:r}),r};try{P(window.WebSocket,_)}catch(e){}}}return J(t,s),t}(),H=null,R=function(e){var t,n,r,o;for(n=0,r=(o=L.ajax.ignoreURLs).length;n<r;n++)if("string"==typeof(t=o[n])){if(-1!==e.indexOf(t))return!0}else if(t.test(e))return!0;return!1},(x=function(){return null==H&&(H=new u),H})().on("request",function(t){var n,r,o,i,a;if(i=t.type,o=t.request,a=t.url,!R(a))return Pace.running||!1===L.restartOnRequestAfter&&"force"!==A(i)?void 0:(r=arguments,"boolean"==typeof(n=L.restartOnRequestAfter||0)&&(n=0),setTimeout(function(){var t,n,a,s,c;if("socket"===i?o.readyState<2:0<(a=o.readyState)&&a<4){for(Pace.restart(),c=[],t=0,n=(s=Pace.sources).length;t<n;t++){if((F=s[t])instanceof e){F.watch.apply(F,r);break}c.push(void 0)}return c}},n))}),e=function(){function e(){var e=this;this.elements=[],x().on("request",function(){return e.watch.apply(e,arguments)})}return e.prototype.watch=function(e){var t,n,r,o;if(r=e.type,t=e.request,o=e.url,!R(o))return n="socket"===r?new d(t):new f(t),this.elements.push(n)},e}(),f=function(){return function(e){var t,n,r,o,i,a=this;if(this.progress=0,null!=window.ProgressEvent)for(e.addEventListener("progress",function(e){return e.lengthComputable?a.progress=100*e.loaded/e.total:a.progress=a.progress+(100-a.progress)/2},!1),n=0,r=(i=["load","abort","timeout","error"]).length;n<r;n++)t=i[n],e.addEventListener(t,function(){return a.progress=100},!1);else o=e.onreadystatechange,e.onreadystatechange=function(){var t;return 0===(t=e.readyState)||4===t?a.progress=100:3===e.readyState&&(a.progress=50),"function"==typeof o?o.apply(null,arguments):void 0}}}(),d=function(){return function(e){var t,n,r,o,i=this;for(this.progress=0,n=0,r=(o=["error","open"]).length;n<r;n++)t=o[n],e.addEventListener(t,function(){return i.progress=100},!1)}}(),r=function(){return function(e){var t,n,r,i;for(null==e&&(e={}),this.elements=[],null==e.selectors&&(e.selectors=[]),n=0,r=(i=e.selectors).length;n<r;n++)t=i[n],this.elements.push(new o(t))}}(),o=function(){function e(e){this.selector=e,this.progress=0,this.check()}return e.prototype.check=function(){var e=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return e.check()},L.elements.checkInterval)},e.prototype.done=function(){return this.progress=100},e}(),n=function(){function e(){var e,t,n=this;this.progress=null!=(t=this.states[document.readyState])?t:100,e=document.onreadystatechange,document.onreadystatechange=function(){return null!=n.states[document.readyState]&&(n.progress=n.states[document.readyState]),"function"==typeof e?e.apply(null,arguments):void 0}}return e.prototype.states={loading:0,interactive:50,complete:100},e}(),i=function(){return function(){var e,t,n,r,o,i=this;this.progress=0,e=0,o=[],r=0,n=T(),t=setInterval(function(){var a;return a=T()-n-50,n=T(),o.push(a),o.length>L.eventLag.sampleCount&&o.shift(),e=g(o),++r>=L.eventLag.minSamples&&e<L.eventLag.lagThreshold?(i.progress=100,clearInterval(t)):i.progress=3/(e+3)*100},50)}}(),p=function(){function e(e){this.source=e,this.last=this.sinceLastUpdate=0,this.rate=L.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=N(this.source,"progress"))}return e.prototype.tick=function(e,t){var n;return null==t&&(t=N(this.source,"progress")),t>=100&&(this.done=!0),t===this.last?this.sinceLastUpdate+=e:(this.sinceLastUpdate&&(this.rate=(t-this.last)/this.sinceLastUpdate),this.catchup=(t-this.progress)/L.catchupTime,this.sinceLastUpdate=0,this.last=t),t>this.progress&&(this.progress+=this.catchup*e),n=1-Math.pow(this.progress/100,L.easeFactor),this.progress+=n*this.rate*e,this.progress=Math.min(this.lastProgress+L.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},e}(),D=null,j=null,m=null,O=null,h=null,v=null,Pace.running=!1,k=function(){if(L.restartOnPushState)return Pace.restart()},null!=window.history.pushState&&(U=window.history.pushState,window.history.pushState=function(){return k(),U.apply(window.history,arguments)}),null!=window.history.replaceState&&(G=window.history.replaceState,window.history.replaceState=function(){return k(),G.apply(window.history,arguments)}),l={ajax:e,elements:r,document:n,eventLag:i},(C=function(){var e,n,r,o,i,a,s,c;for(Pace.sources=D=[],n=0,o=(a=["ajax","elements","document","eventLag"]).length;n<o;n++)!1!==L[e=a[n]]&&D.push(new l[e](L[e]));for(r=0,i=(c=null!=(s=L.extraSources)?s:[]).length;r<i;r++)F=c[r],D.push(new F(L));return Pace.bar=m=new t,j=[],O=new p})(),Pace.stop=function(){return Pace.trigger("stop"),Pace.running=!1,m.destroy(),v=!0,null!=h&&("function"==typeof y&&y(h),h=null),C()},Pace.restart=function(){return Pace.trigger("restart"),Pace.stop(),Pace.start()},Pace.go=function(){var e;return Pace.running=!0,m.render(),e=T(),v=!1,h=q(function(t,n){var r,o,i,a,s,c,u,l,d,f,h,g,y,b,w;for(100-m.progress,o=f=0,i=!0,c=h=0,y=D.length;h<y;c=++h)for(F=D[c],d=null!=j[c]?j[c]:j[c]=[],u=g=0,b=(s=null!=(w=F.elements)?w:[F]).length;g<b;u=++g)a=s[u],i&=(l=null!=d[u]?d[u]:d[u]=new p(a)).done,l.done||(o++,f+=l.tick(t));return r=f/o,m.update(O.tick(t,r)),m.done()||i||v?(m.update(100),Pace.trigger("done"),setTimeout(function(){return m.finish(),Pace.running=!1,Pace.trigger("hide")},Math.max(L.ghostTime,Math.max(L.minTime-(T()-e),0)))):n()})},Pace.start=function(e){w(L,e),Pace.running=!0;try{m.render()}catch(e){c=e}return document.querySelector(".pace")?(Pace.trigger("start"),Pace.go()):setTimeout(Pace.start,50)},"function"==typeof define&&define.amd?define(function(){return Pace}):"object"==typeof exports?module.exports=Pace:L.startOnPageLoad&&Pace.start()}.call(this);